"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[731],{9731:function(a,s,t){t.r(s),t.d(s,{default:function(){return p}});var e=function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",[t("TypeNav"),t("div",{staticClass:"main"},[t("div",{staticClass:"py-container"},[t("div",{staticClass:"bread"},[a._m(0),t("ul",{staticClass:"fl sui-tag"},[t("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.categoryName,expression:"searchParams.categoryName"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.categoryName)),t("i",{on:{click:a.removeCategoryName}},[a._v("×")])]),t("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.keyword,expression:"searchParams.keyword"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.keyword)),t("i",{on:{click:a.removeKeyWord}},[a._v("×")])]),t("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.trademark,expression:"searchParams.trademark"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.trademark.split(":")[1])),t("i",{on:{click:a.removeTrade}},[a._v("×")])]),a._l(a.searchParams.props,(function(s,e){return t("li",{key:e,staticClass:"with-x"},[a._v(" "+a._s(s.split(":")[2])),t("i",{on:{click:a.removeAttrValue}},[a._v("×")])])}))],2)]),t("SearchSelector",{on:{getTrades:a.getTrades,getAttr:a.getAttr}}),t("div",{staticClass:"details clearfix"},[t("div",{staticClass:"sui-navbar"},[t("div",{staticClass:"navbar-inner filter"},[t("ul",{staticClass:"sui-nav"},[t("li",{class:{active:a.isOne},on:{click:function(s){return a.changeOrder("1")}}},[t("a",[a._v("综合"),t("span",{directives:[{name:"show",rawName:"v-show",value:a.isOne,expression:"isOne"}],staticClass:"iconfont",class:{"icon-up":a.isAsc,"icon-down":a.isDesc}})])]),t("li",{class:{active:a.isTwo},on:{click:function(s){return a.changeOrder("2")}}},[t("a",[a._v("价格"),t("span",{directives:[{name:"show",rawName:"v-show",value:a.isTwo,expression:"isTwo"}],staticClass:"iconfont",class:{"icon-up":a.isAsc,"icon-down":a.isDesc}})])])])])]),t("div",{staticClass:"goods-list"},[t("ul",{staticClass:"yui3-g"},a._l(a.goodsList,(function(s){return t("li",{key:s.id,staticClass:"yui3-u-1-5"},[t("div",{staticClass:"list-wrap"},[t("div",{staticClass:"p-img"},[t("router-link",{attrs:{to:"/detail/"+s.id}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.defaultImg,expression:"good.defaultImg"}]})])],1),t("div",{staticClass:"price"},[t("strong",[t("em",[a._v("¥")]),t("i",[a._v(a._s(s.price)+".00")])])]),t("div",{staticClass:"attr"},[t("a",{attrs:{target:"_blank",href:"item.html",title:"促销信息，下单即赠送三个月CIBN视频会员卡！【小米电视新品4A 58 火爆预约中】"}},[a._v(a._s(s.title))])]),a._m(1,!0),a._m(2,!0)])])})),0)]),t("Pagination",{attrs:{pageNo:a.searchParams.pageNo,pageSize:a.searchParams.pageSize,total:a.total,continuePage:5},on:{getPageNo:a.getPageNo}})],1)],1)])],1)},r=[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ul",{staticClass:"fl sui-breadcrumb"},[t("li",[t("a",{attrs:{href:"#"}},[a._v("全部结果")])])])},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"commit"},[t("i",{staticClass:"command"},[a._v("已有"),t("span",[a._v("2000")]),a._v("人评价")])])},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"operate"},[t("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[a._v("加入购物车")]),t("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[a._v("收藏")])])}],i=t(4665),c=function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"clearfix selector"},[t("div",{staticClass:"type-wrap logo"},[t("div",{staticClass:"fl key brand"},[a._v("品牌")]),t("div",{staticClass:"value logos"},[t("ul",{staticClass:"logo-list"},a._l(a.trademarkList,(function(s){return t("li",{key:s.tmId,on:{click:function(t){return a.tradeHarkHandler(s)}}},[a._v(a._s(s.tmName))])})),0)]),a._m(0)]),a._l(a.attrsList,(function(s){return t("div",{key:s.attrId,staticClass:"type-wrap"},[t("div",{staticClass:"fl key"},[a._v(a._s(s.attrName))]),t("div",{staticClass:"fl value"},[t("ul",{staticClass:"type-list"},a._l(s.attrValueList,(function(e,r){return t("li",{key:r,on:{click:function(t){return a.attrInfo(s,e)}}},[t("a",[a._v(a._s(e))])])})),0)]),t("div",{staticClass:"fl ext"})])}))],2)},o=[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"ext"},[t("a",{staticClass:"sui-btn",attrs:{href:"javascript:void(0);"}},[a._v("多选")]),t("a",{attrs:{href:"javascript:void(0);"}},[a._v("更多")])])}],n={name:"SearchSelector",computed:{...(0,i.Se)(["trademarkList","attrsList"])},methods:{tradeHarkHandler(a){this.$emit("getTrades",a)},attrInfo(a,s){this.$emit("getAttr",a,s)}}},l=n,h=t(1001),d=(0,h.Z)(l,c,o,!1,null,"71f076e6",null),m=d.exports,u={name:"Search",components:{SearchSelector:m},data(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",order:"1:desc",pageNo:1,pageSize:3,props:[],trademark:""}}},beforeMount(){Object.assign(this.searchParams,this.$route.query,this.$route.params)},mounted(){this.getData()},computed:{...(0,i.Se)(["goodsList"]),isOne(){return-1!=this.searchParams.order.indexOf("1")},isTwo(){return-1!=this.searchParams.order.indexOf("2")},isAsc(){return-1!=this.searchParams.order.indexOf("asc")},isDesc(){return-1!=this.searchParams.order.indexOf("desc")},...(0,i.rn)({total:a=>a.search.searchList.total})},methods:{getData(){this.$store.dispatch("getSearchList",this.searchParams)},removeCategoryName(){this.searchParams.categoryName=void 0,this.searchParams.category1Id=void 0,this.searchParams.category2Id=void 0,this.searchParams.category3Id=void 0,this.getData(),this.$route.params&&this.$router.push({name:"search",params:this.$route.params})},removeKeyWord(){this.searchParams.keyword=void 0,this.getData(),this.$route.query&&this.$router.push({name:"search",query:this.$route.query}),this.$bus.$emit("clear")},getTrades(a){this.searchParams.trademark=`${a.tmId}:${a.tmName}`,this.getData()},removeTrade(){this.searchParams.trademark="",this.getData()},getAttr(a,s){let t=`${a.attrId}:${a.attrName}:${s}`;-1==this.searchParams.props.indexOf(t)&&this.searchParams.props.push(t),this.getData()},removeAttrValue(){this.searchParams.props.splice(index,1),this.getData()},changeOrder(a){console.log(a),-1!=this.searchParams.order.indexOf("asc")?this.searchParams.order=`${a}:desc`:this.searchParams.order=`${a}:asc`,this.getData()},getPageNo(a){this.searchParams.pageNo=a,this.getData()}},watch:{$route(){Object.assign(this.searchParams,this.$route.query,this.$route.params),this.getData(),this.searchParams.category1Id=void 0,this.searchParams.category2Id=void 0,this.searchParams.category3Id=void 0}}},v=u,g=(0,h.Z)(v,e,r,!1,null,"14a19130",null),p=g.exports}}]);